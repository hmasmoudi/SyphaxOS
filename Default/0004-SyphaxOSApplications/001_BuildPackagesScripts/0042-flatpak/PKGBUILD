# Maintainer: Hatem Masmoudi <hatem.masmoudi@gmail.com>

pkgname=flatpak
pkgver=0.10.1
pkgrel=2
pkgdesc="THE FUTURE OF APPLICATION DISTRIBUTION. Flatpak is the new framework for desktop applications on Linux."
arch=('x86_64')
url="https://github.com/flatpak/flatpak/releases/download/${pkgver}"
license=('GPL')
groups=('applications')
source=("$url/${pkgname}-${pkgver}.tar.xz")
sha256sums=('c43f6d1503be2b6a2d43ff8b16e3d2f34b6d7c696f4449446a8870cc31a4437c')
depends=('rootfs' 'ostree' 'elfutils' 'bubblewrap')

prepare() {
   cd "$srcdir/${pkgname}-${pkgver}"
   
   sed -i "/seems to be moved/s/^/#/" ltmain.sh
}
build() {
   cd "$srcdir/${pkgname}-${pkgver}"
   
   ./configure --prefix=/usr --with-system-bubblewrap
   
   make
}

package() {
   cd "$srcdir/${pkgname}-${pkgver}"
   
   make DESTDIR="${pkgdir}" install
   
   chmod 700 "${pkgdir}"/usr/share/polkit-1/rules.d
}

