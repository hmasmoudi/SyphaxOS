# Maintainer: Hatem Masmoudi <hatem.masmoudi@gmail.com>

pkgname=budgie-desktop
pkgver=10.3.0
pkgrel=2
_commit=cfd4f1939c2862f945b98f4f550d41257e2dbac7  # master
pkgdesc="The Budgie Desktop a modern desktop designed to keep out the way of the user."
arch=('x86_64')
install=${pkgname}.install
url="git+https://github.com/budgie-desktop/budgie-desktop#commit=$_commit"
license=('APACHE')
groups=('applications')
source=("git+https://github.com/budgie-desktop/budgie-desktop#commit=$_commit"
        "panel.ini")
md5sums=('SKIP'
         '90ac453e4ab2095c70525796c7014bfb')
depends=('gnomedesktop>=2.0.0' 'gnome-screensaver>=3.6.1' 'SyphaxOS-Theme>=2.0.0')

prepare() {
   cd "$srcdir/${pkgname}"
   
   #Remove old build
   rm -rf build
   
   #update de get gvc
   git submodule update --init --recursive
   
   meson build --prefix=/usr --sysconfdir=/etc --buildtype release -Dwith-gtk-doc=false
   
   cp "$srcdir"/panel.ini "$srcdir/${pkgname}"/src/panel/panel.ini
}

build() {
   cd "$srcdir/${pkgname}"
   
   cd build
   ninja -j$(($(getconf _NPROCESSORS_ONLN)+1))
}

package() {
   cd "$srcdir/${pkgname}"
   
   cd build
   DESTDIR="${pkgdir}" ninja install
}

