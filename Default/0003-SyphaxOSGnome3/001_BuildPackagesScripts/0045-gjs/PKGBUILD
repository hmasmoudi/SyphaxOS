# Maintainer: Hatem Masmoudi <hatem.masmoudi@gmail.com>

pkgname=gjs
pkgver=1.52.0
pkgrel=2
pkgdesc="Gjs is a set of Javascript bindings for GNOME."
arch=('x86_64')
url="https://ftp.gnome.org/pub/gnome/sources/gjs/${pkgver:0:4}"
license=('GPL')
groups=('desktop')
source=("$url/${pkgname}-${pkgver}.tar.xz")
sha256sums=('5524a045e5e1d34a2a510133c662f2685e15ce26ae2ed699fb5d131b6b04a4ca')
depends=('rootfs')

prepare() {
   cd "$srcdir/$pkgname-${pkgver}"
   
   NOCONFIGURE=1 ./autogen.sh
}

build() {
   cd "$srcdir/$pkgname-${pkgver}"
   
   ./configure --prefix=/usr --disable-static
   sed -i -e 's/ -shared / -Wl,-O1,--as-needed\0/g' libtool
   make
}

package() {
   cd "$srcdir/$pkgname-${pkgver}"

   make DESTDIR="$pkgdir" install
}

