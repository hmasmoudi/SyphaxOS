# Maintainer: Hatem Masmoudi <hatem.masmoudi@gmail.com>

pkgname=gnome-control-center
pkgver=3.26.2
pkgrel=5
pkgdesc="The GNOME Control Center package contains the GNOME settings manager."
arch=('x86_64')
url="http://ftp.gnome.org/pub/gnome/sources/gnome-control-center/3.26"
license=('GPL')
groups=('desktop')
source=("$url/${pkgname}-${pkgver}.tar.xz"
        "cc-info-overview-panel.patch"
        "SyphaxOSLogoWhite.svg")
sha256sums=('07aed27d6317f2cad137daa6d94a37ad02c32b958dcd30c8f07d0319abfb04c5'
            'SKIP'
            '47990b67706071d17d9f94cf95cd8a02328ee8eb7bdbecd87b7981711d583cb2')
depends=('rootfs')

prepare() {
   cd "$srcdir/${pkgname}-${pkgver}"
   
   sed -i "/seems to be moved/s/^/#/" ltmain.sh
   
   cp -f ../SyphaxOSLogoWhite.svg ./panels/info/GnomeLogoVerticalMedium.svg

   patch -p1 -i ../cc-info-overview-panel.patch
}

build() {
   cd "$srcdir/${pkgname}-${pkgver}"
   
   ./configure --prefix=/usr --disable-static
   
   make
}

package() {
   cd "$srcdir/${pkgname}-${pkgver}"
   
   make DESTDIR="${pkgdir}" install
   
   sed -i "/OnlyShowIn/d" "$pkgdir/usr/share/applications/gnome-control-center.desktop"
   
   install -d -o root -g 102 -m 700 "$pkgdir/usr/share/polkit-1/rules.d"
}

