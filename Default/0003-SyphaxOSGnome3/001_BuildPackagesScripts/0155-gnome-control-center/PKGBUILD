# Maintainer: Hatem Masmoudi <hatem.masmoudi@gmail.com>

pkgname=gnome-control-center
pkgver=3.24.3
pkgrel=1
pkgdesc="The GNOME Control Center package contains the GNOME settings manager."
arch=('x86_64')
url="http://ftp.gnome.org/pub/gnome/sources/gnome-control-center/3.24"
license=('GPL')
groups=('desktop')
source=("$url/${pkgname}-${pkgver}.tar.xz")
sha256sums=('43a4d2a4c222ee4a53428a4a720f823e157e4d4c597ea1a84e438d242596cca2')
depends=('rootfs>=2.0.0')

prepare() {
   cd "$srcdir/${pkgname}-${pkgver}"
   
   sed -i "/seems to be moved/s/^/#/" ltmain.sh
}

build() {
   cd "$srcdir/${pkgname}-${pkgver}"
   
   ./configure --prefix=/usr --disable-static
   
   make
}

package() {
   cd "$srcdir/${pkgname}-${pkgver}"
   
   make DESTDIR="${pkgdir}" install
   
   sed -i "/OnlyShowIn/d" "$pkgdir/usr/share/applications/gnome-control-center.desktop"
   
   install -d -o root -g 102 -m 700 "$pkgdir/usr/share/polkit-1/rules.d"
}

