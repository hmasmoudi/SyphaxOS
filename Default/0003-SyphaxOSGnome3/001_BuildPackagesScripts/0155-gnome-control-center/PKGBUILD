# Maintainer: Hatem Masmoudi <hatem.masmoudi@gmail.com>

pkgname=gnome-control-center
pkgver=3.24.2
pkgrel=3
pkgdesc="The GNOME Control Center package contains the GNOME settings manager."
arch=('x86_64')
url="http://ftp.gnome.org/pub/gnome/sources/gnome-control-center/3.24"
license=('GPL')
groups=('desktop')
source=("$url/${pkgname}-${pkgver}.tar.xz")
sha256sums=('382a4b1bf54754c1f5f83adb1faeca2e9de70df5d3d85ac6b0fb192801518f2b')
depends=('rootfs>=2.0.0')

prepare() {
   cd "$srcdir/${pkgname}-${pkgver}"
   
   sed -i "/seems to be moved/s/^/#/" ltmain.sh
}

build() {
   cd "$srcdir/${pkgname}-${pkgver}"
   
   ./configure --prefix=/usr --disable-static
   
   make
}

package() {
   cd "$srcdir/${pkgname}-${pkgver}"
   
   make DESTDIR="${pkgdir}" install
   
   sed -i "/OnlyShowIn/d" "$pkgdir/usr/share/applications/gnome-control-center.desktop"
   
   install -d -o root -g 102 -m 700 "$pkgdir/usr/share/polkit-1/rules.d"
}

