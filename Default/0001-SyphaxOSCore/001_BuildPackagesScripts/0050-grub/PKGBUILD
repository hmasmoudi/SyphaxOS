# Maintainer: Hatem Masmoudi <hatem.masmoudi@gmail.com>

pkgname=grub
pkgver=2.02~rc2
pkgrel=1
pkgdesc="The GRUB package contains the GRand Unified Bootloader."
arch=('x86_64')
url="http://alpha.gnu.org/gnu/grub"
license=('GPL')
groups=('core')
source=("$url/$pkgname-$pkgver.tar.xz")
md5sums=('fcce2628109b2ca408aa5f3eb46a1d86')
depends=('rootfs>=2.0.0')

build() {
   cd "$srcdir/$pkgname-$pkgver"

   ./configure --prefix=/usr           \
               --sbindir=/sbin         \
               --sysconfdir=/etc       \
               --with-bootdir="/boot"  \
               --with-grubdir="grub"   \
               --enable-device-mapper  \
               --enable-grub-mount     \
               --disable-efiemu        \
               --disable-werror
   make
}

package() {
   cd "$srcdir/$pkgname-$pkgver"

   make DESTDIR="$pkgdir" install
   
   install -D -m0644 "../../grub.default" "${pkgdir}/etc/default/grub"
}
