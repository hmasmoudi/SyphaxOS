# Maintainer: Hatem Masmoudi <hatem.masmoudi@gmail.com>

pkgname=perl
pkgver=5.26.1
pkgrel=2
pkgdesc="The Perl package contains the Practical Extraction and Report Language."
arch=('x86_64')
url="http://www.cpan.org/src/5.0"
license=('GPL')
groups=('core')
source=("$url/$pkgname-$pkgver.tar.xz")
md5sums=('70e988b4318739b0cf3ad5e120bfde88')
depends=('rootfs')

prepare() {
   cd "$srcdir/$pkgname-$pkgver"
   
   #sed -e '9751 a#ifndef PERL_IN_XSUB_RE' \
   # -e '9808 a#endif'                  \
   # -i regexec.c
}

build() {
   cd "$srcdir/$pkgname-$pkgver"

   export BUILD_ZLIB=False
   export BUILD_BZIP2=0

   sh Configure -des -Dprefix=/usr                 \
                     -Dvendorprefix=/usr           \
                     -Dman1dir=/usr/share/man/man1 \
                     -Dman3dir=/usr/share/man/man3 \
                     -Dpager="/usr/bin/less -isR"  \
                     -Duseshrplib                  \
                     -Dusethreads


   make
}

package() {
   cd "$srcdir/$pkgname-$pkgver"

   export BUILD_ZLIB=False
   export BUILD_BZIP2=0

   make DESTDIR="$pkgdir" install
}
