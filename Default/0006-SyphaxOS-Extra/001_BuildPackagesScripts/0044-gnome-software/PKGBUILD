# Maintainer: Hatem Masmoudi <hatem.masmoudi@gmail.com>

pkgname=gnome-software
pkgver=3.22.6
pkgrel=2
pkgdesc="GNOME Software Tools"
install=$pkgname.install
arch=(x86_64)
license=(GPL2)
url="https://wiki.gnome.org/Apps/Software/"
depends=("rootfs")
source=("http://ftp.acc.umu.se/pub/gnome/sources/gnome-software/3.22/$pkgname-$pkgver.tar.xz")
sha256sums=('fb91cd7a48fdd5109fec87b8c5f08465e877592aa4da972a0b3abd715a7ffd3e')

build() {
  cd $pkgname-$pkgver
  
  ./configure --prefix=/usr --sysconfdir=/etc --localstatedir=/var \
    --disable-static --disable-schemas-compile --enable-packagekit \
    --enable-flatpak --enable-gtk-doc
  sed -i -e 's/ -shared / -Wl,-O1,--as-needed\0/g' libtool
  make
}

package() {
  cd $pkgname-$pkgver
  
  make DESTDIR="${pkgdir}" install
}
