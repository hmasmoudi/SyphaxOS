# Maintainer: Hatem Masmoudi <hatem.masmoudi@gmail.com>

pkgname=evolution
pkgver=3.22.6
pkgrel=4
pkgdesc="Evolution. Evolution is a personal information management application that provides integrated mail, calendaring and address book functionality."
arch=('x86_64')
url="http://ftp.gnome.org/pub/gnome/sources/evolution/3.22"
license=('GPL')
install=${pkgname}.install
groups=('applications')
source=("$url/${pkgname}-${pkgver}.tar.xz")
sha256sums=('9f4be4a1d5ee4d5eb9b132cf751ba3afc833025aa6dc7baa1f9483489d8a943e')
depends=('rootfs>=2.0.0'
         'libpst'
         'hyphen'
         'gtkspell3'
         'hunspell'
         'hunspell-en'
         'hunspell-en_GB'
         'hunspell-en_US'
         'hunspell-fr')

prepare() {
   cd "$srcdir/${pkgname}-${pkgver}"
   
   sed -i "/seems to be moved/s/^/#/" ltmain.sh
}

build() {
   cd "$srcdir/${pkgname}-${pkgver}"
   
   ./configure --prefix=/usr \
               --enable-gtkspell \
               --enable-pst-import \
               --disable-libcryptui \
               --disable-text-highlight

   make
}

package() {
   cd "$srcdir/${pkgname}-${pkgver}"
   
   make DESTDIR="${pkgdir}" install
}

