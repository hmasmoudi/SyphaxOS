# Maintainer: Hatem Masmoudi <hatem.masmoudi@gmail.com>

pkgname=boost
pkgver=1.61.0
pkgrel=1
pkgdesc="Boost provides a set of free peer-reviewed portable C++ source libraries."
arch=('x86_64')
url="http://downloads.sourceforge.net/boost"
license=('GPL')
groups=('core')
source=("$url/${pkgname}_1_61_0.tar.bz2")
md5sums=('6095876341956f65f9d35939ccea1a9f')
depends=('rootfs>=2.0.0')

prepare() {
   cd "$srcdir/${pkgname}_1_61_0"
   sed -e '/using python/ s@;@: /usr/include/python${PYTHON_VERSION/3*/${PYTHON_VERSION}m} ;@' \
       -i bootstrap.sh
       
    sed -e '1 i#ifndef Q_MOC_RUN' \
        -e '$ a#endif'            \
        -i boost/type_traits/detail/has_binary_operator.hpp
}

build() {
   cd "$srcdir/${pkgname}_1_61_0"
   
   ./bootstrap.sh --prefix=/usr
   ./b2 stage threading=multi link=shared
}

package() {
   cd "$srcdir/${pkgname}_1_61_0"
   
   ./b2 --prefix="$pkgdir" install threading=multi link=shared
}

