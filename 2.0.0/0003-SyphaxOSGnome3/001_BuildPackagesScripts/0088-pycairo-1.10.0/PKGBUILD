# Maintainer: Hatem Masmoudi <hatem.masmoudi@gmail.com>

pkgname=pycairo
pkgver=1.10.0
pkgrel=1
pkgdesc="PyCairo provides Python 3 bindings to Cairo."
arch=('x86_64')
url="http://cairographics.org/releases"
license=('GPL')
groups=('core')
source=("$url/${pkgname}-${pkgver}.tar.bz2"
        "pycairo-1.10.0-waf_unpack-1.patch"
        "pycairo-1.10.0-waf_python_3_4-1.patch")
md5sums=('e6fd3f2f1e6a72e0db0868c4985669c5'
         '60af186292c0fb69cb62f70ae333495c'
         'f75bd7ea0a46c292320dfb9d4e8c17ed')
depends=('rootfs>=2.0.0')

prepare() {
   cd "$srcdir/${pkgname}-${pkgver}"
   
   patch -Np1 -i ../../pycairo-1.10.0-waf_unpack-1.patch
   
   wafdir=$(./waf unpack)
   
   pushd $wafdir
   patch -Np1 -i ../../../pycairo-1.10.0-waf_python_3_4-1.patch
   popd
   
   unset wafdir
}

build() {
   cd "$srcdir/${pkgname}-${pkgver}"

  PYTHON=/usr/bin/python3 ./waf configure --prefix=/usr
  ./waf build
}

package() {
   cd "$srcdir/${pkgname}-${pkgver}"
   
   ./waf --destdir="${pkgdir}" install
}

