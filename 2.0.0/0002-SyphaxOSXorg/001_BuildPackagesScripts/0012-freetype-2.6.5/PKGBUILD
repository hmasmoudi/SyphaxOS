# Maintainer: Hatem Masmoudi <hatem.masmoudi@gmail.com>

pkgname=freetype
pkgver=2.6.5
pkgrel=1
pkgdesc="The FreeType2 package contains a library which allows applications to properly render TrueType fonts."
arch=('x86_64')
url="http://downloads.sourceforge.net/freetype"
license=('GPL')
groups=('core')
source=("$url/${pkgname}-${pkgver}.tar.bz2")
md5sums=('6a386964e18ba28cb93370e57a19031b')
depends=('rootfs>=2.0.0')

prepare() {
   cd "$srcdir/$pkgname-$pkgver"
   
   sed -ri "s:.*(AUX_MODULES.*valid):\1:" modules.cfg

   sed -r "s:.*(#.*SUBPIXEL_(RENDERING|HINTING 2)) .*:\1:g" \
       -i include/freetype/config/ftoption.h 
}

build() {
   cd "$srcdir/$pkgname-$pkgver"
   
   source /etc/profile.d/xorg.sh
   echo "Using XORG_PREFIX ($XORG_PREFIX) & XORG_CONFIG ($XORG_CONFIG)"
   
   ./configure --prefix=/usr --disable-static
   
   make
}

package() {
   cd "$srcdir/$pkgname-$pkgver"
   
   #Make the package
   make DESTDIR="$pkgdir" install
}

