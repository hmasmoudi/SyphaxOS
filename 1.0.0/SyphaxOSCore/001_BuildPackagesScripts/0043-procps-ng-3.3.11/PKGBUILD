# Maintainer: Hatem Masmoudi <hatem.masmoudi@gmail.com>

pkgname=procps-ng
pkgver=3.3.11
pkgrel=1
pkgdesc="The Procps-ng package contains programs for monitoring processes."
arch=('x86_64')
url="http://sourceforge.net/projects/procps-ng/files/Production"
license=('GPL')
groups=('core')
source=("$url/$pkgname-$pkgver.tar.xz")
md5sums=('6cc5b94c1c5b8cbc89ad345a7b522f74')
depends=('rootfs>=1.0.0')

prepare() {
        cd "$srcdir/$pkgname-$pkgver"
}

build() {
        cd "$srcdir/$pkgname-$pkgver"

        ./configure --prefix=/usr                            \
                    --exec-prefix=                           \
                    --libdir=/usr/lib                        \
                    --docdir=/usr/share/doc/procps-ng-3.3.11 \
                    --disable-static                         \
                    --disable-kill                           \
                    --with-systemd

        make
}

package() {
        cd "$srcdir/$pkgname-$pkgver"
        
        make LD_LIBRARY_PATH=/lib DESTDIR="$pkgdir" install

        mkdir -pv $pkgdir/lib

        mv -v $pkgdir/usr/lib/libprocps.so.* $pkgdir/lib
        ln -sfv ../../lib/$(readlink /usr/lib/libprocps.so) $pkgdir/usr/lib/libprocps.so
}

